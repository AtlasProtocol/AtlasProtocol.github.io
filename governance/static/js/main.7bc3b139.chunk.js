(window.webpackJsonpgovernance=window.webpackJsonpgovernance||[]).push([[0],{151:function(t,e,a){t.exports={box:"style_box__dzq78","loader-01":"style_loader-01__1N6qy"}},16:function(t,e,a){t.exports={container:"style_container__vMP_3",cellContainer:"style_cellContainer__2XE2t",indexContainer:"style_indexContainer__2WUh2",middleContainer:"style_middleContainer__1pVDp",rightContainer:"style_rightContainer__CANtl",textSpan:"style_textSpan__3NQVf",textSpanBold:"style_textSpanBold__36yJE",declineButton:"style_declineButton__2qX5n",agreeButton:"style_agreeButton__TumXy",txContainer:"style_txContainer__dG5T_"}},20:function(t,e,a){t.exports={container:"style_container__1YADF",cellContainer:"style_cellContainer__3OomX",indexContainer:"style_indexContainer__w8A03",middleContainer:"style_middleContainer__14TTZ",rightContainer:"style_rightContainer__2XKW4",textSpan:"style_textSpan__1yd5i",textSpanBold:"style_textSpanBold__27p4g",declineButton:"style_declineButton__iR1Ts",agreeButton:"style_agreeButton__2bglx",txContainer:"style_txContainer__252hl"}},23:function(t,e,a){t.exports={container:"style_container__n9ZJU",leftContainer:"style_leftContainer__mXr4G",rightContainer:"style_rightContainer__d6sMu",topButton:"style_topButton__1KMHv",netButton:"style_netButton__2Ri0-"}},242:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAikAAACQCAMAAAD6Fwu4AAAAilBMVEVMaXH////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////iVxWkAAAALXRSTlMAMBDQwGDwZoBAIKDgcJBQsAZTEyYaM006LUYN01ryupb2xsMihRaOtoSIjHx3424YAAAACXBIWXMAAAsSAAALEgHS3X78AAANGUlEQVR42u2d53bkLBKGrYAslNvtdpqdL2/evv/bW9vjsQABqiLK59T7c8bdkuChEiX65oZEIpFIJBKJRCKRSCQSiUQikUgkEklVS0NAgohdCxoE0r749UpGhbSvorleKxoG0p7K6vqqjgaCtKP6DZTrSANBsqt/B4XcD2k37fkQuR/STtrzIXI/pJ2050MLjQZpJ+35UEnjQbKnPR9iNB4ke9pD7ocETHvI/ZBgaQ+5HxIs7flQT4NC2kl7fqihUSHtpD0fmmlYSPa0h9wPCZj2kPs5WnDA35R/L6646kXuJ7s6NtWDvH7rum/HPNR0jYGUKUOuXotiqCWH0mak2edVwzx24fQk8sRMw9WsepoTl7w0ac+HhvSkTE51Yn5Fa9Mp3K5TEORJWnlaXRbN7kPwtJOzmO8kfYt+5RQpHZEUZZ7R63cBPATPuIozu5/SDdUDklL6xXy8uR6NFGa7k+TuR72b8cuSMnstOgZ7iJSkFPZbSe1+1LpO/WVJUU11FQGUlKR0DXI8I2sT639ZUjZpAiJPKZrDkWJOe1xWQgBwHcfieKSUV4+teXVWmlpWBlL24+u0BR7maNSORwrz2BuR8uth1OJQ8HGqm2SkTPsDmrZFf0subNaKeivBkQ2a/2ZxSends4NS8D39MY4SgMRNad2Pxj+HqHy1uL8PQcrgbp7H1evwQ3Cyl/ZkcD9FyKAtKymd5kmggcpnlNIc5GySDhZgp3Q/Y8jiX1ZSdE+yYJfLQV7OM6Y91ZytRX8N6nt/95eVlM+AqxqwWxNjxl03VNpTlYqPTbhfKfg8/+tnJeXTXrc9toy5HOw1mskMimI607XocyFPqL2b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"},246:function(t,e,a){t.exports=a(507)},25:function(t,e,a){t.exports={container:"style_container__2hacf",inputContainer:"style_inputContainer__hi5oX",txContainer:"style_txContainer__m2C1N",proposalInput:"style_proposalInput__1vd4H",inputName:"style_inputName__3Qq_9",genButton:"style_genButton__1QqyK"}},251:function(t,e,a){},252:function(t,e,a){},26:function(t,e,a){t.exports={container:"style_container__1dw1C",cellContainer:"style_cellContainer__2daYW",indexContainer:"style_indexContainer__3lD7A",middleContainer:"style_middleContainer__3YCwe",rightContainer:"style_rightContainer__2idDS",textSpan:"style_textSpan__259hl",textSpanBold:"style_textSpanBold__XTL3t"}},27:function(t,e,a){t.exports={container:"style_container__3TUf4",inputContainer:"style_inputContainer__E24tl",txContainer:"style_txContainer__18tvb",proposalInput:"style_proposalInput__1S8Z1",inputName:"style_inputName__1gTzc",genButton:"style_genButton__2RZjo",headerContainer:"style_headerContainer__2aaKZ"}},348:function(t,e){},350:function(t,e){},372:function(t,e){},374:function(t,e){},507:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(40),s=a.n(r),c=(a(251),a(252),a(48)),l=a(47),i=(a(58),a(4)),u=a.n(i),m=a(14),d=a(21),p=a(19),h=a(9),f=a(18),g=a(23),v=a.n(g),E=a(242),N=a.n(E),x=a(82),A=a.n(x),b="contractAddress",S="fromAddress",C="net",y="mainnet",k="testnet";function _(t){A.a.set(b,t),console.log("stored Contract: ".concat(t))}function B(){return P(b)}function O(){return P(S)}function P(t){var e=A.a.get(t);return"undefined"===typeof e?"":e}function T(t){A.a.set(C,t)}var j=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).changeNet=function(){P(C)===y?(T(k),_(""),u.a.info("\u5df2\u5207\u6362\u81f3\u6d4b\u8bd5\u7f51",1),setTimeout((function(){window.location.reload()}),1e3)):(T(y),_(""),u.a.info("\u5df2\u5207\u6362\u81f3\u4e3b\u7f51",1),setTimeout((function(){window.location.reload()}),1e3)),a.setState({net:P(C)})},a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:v.a.container},o.a.createElement("div",{className:v.a.leftContainer},o.a.createElement("img",{src:N.a,style:{height:"40px",paddingTop:"5px",paddingBottom:"5px"}}),o.a.createElement("button",{className:v.a.netButton,onClick:this.changeNet},P(C)===y?"MainNet":"TestNet")),o.a.createElement("div",{className:v.a.rightContainer},o.a.createElement("button",{className:v.a.topButton},o.a.createElement(c.b,{to:"/",className:v.a.topButton},"\u63d0\u6848")),o.a.createElement("button",{className:v.a.topButton},o.a.createElement(c.b,{to:"/vote",className:v.a.topButton},"\u6295\u7968")),o.a.createElement("button",{className:v.a.topButton},o.a.createElement(c.b,{to:"/transfer",className:v.a.topButton},"\u6267\u884c\u8f6c\u8d26")),o.a.createElement("button",{className:v.a.topButton},o.a.createElement(c.b,{to:"/history",className:v.a.topButton},"\u5386\u53f2\u63d0\u6848")),o.a.createElement("button",{className:v.a.topButton},o.a.createElement(c.b,{to:"/contract",className:v.a.topButton},"\u6cbb\u7406\u5408\u7ea6"))))}}]),e}(o.a.Component),w=(a(170),a(57)),I=a.n(w),U=a(5),F=a.n(U),K=a(10),J=a(25),L=a.n(J),Q=a(149),Z={nas:P(C)===y?"https://mainnet.nebulas.io":"https://testnet.nebulas.io",nas_explorer:P(C)===y?"https://explorer.nebulas.io/#/":"https://explorer.nebulas.io/#/testnet/"},R=function(t){return D("".concat(Z.nas,"/v1/user/accountstate"),t)},M=function(t){return D("".concat(Z.nas,"/v1/user/call"),t)};function D(t,e){return Q.a.post(t,{json:e}).json()}var V=a(101),G=a.n(V),H=a(151),W=a.n(H),X=(o.a.Component,a(71)),q=a.n(X),z=a(41),Y=a.n(z),$=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).startGenerate=function(){a.getAccountInfo()},a.generateTransaction=function(){var t=[a.state.toAddress,a.state.amount,a.state.note],e=JSON.stringify(t);console.log("STR = "+e);var n=new G.a.Transaction({chainID:1,from:a.state.fromAddress,to:a.state.contractAddress,value:0,nonce:a.state.accountInfo.nonce,gasPrice:2e10,gasLimit:2e5,contract:{function:"submitProposal",args:e}});console.log(n.toPlainObject()),a.setState({txString:JSON.stringify(n.toPlainObject())}),u.a.hide()},a.setFromAddress=function(t){console.log(t),a.setState({fromAddress:t})},a.setAmount=function(t){a.setState({amount:t})},a.setToAddress=function(t){a.setState({toAddress:t})},a.setContractAddress=function(t){a.setState({contractAddress:t})},a.setNote=function(t){a.setState({note:t})},a.nebpayAction=function(){var t="".concat(a.state.contractAddress),e='["'.concat(a.state.toAddress,'","').concat(a.state.amount,'","').concat(a.state.note,'"]'),n={gasLimit:"200000",callback:Y.a.config.mainnetUrl};a.serialNumber=a.nebPay.call(t,"0","submitProposal",e,n),console.log(a.serialNumber)},a.state={toAddress:"",amount:"",fromAddress:O(),spinning:!1,note:"",txString:null,contractAddress:B()},a.nebPay=new Y.a,a.serialNumber="",a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){console.log(Z.nas),this.state.contractAddress&&this.state.fromAddress||(u.a.info("\u8bf7\u5148\u8bbe\u7f6e\u5408\u7ea6\u5730\u5740\u4ee5\u53caFrom"),this.props.history.push("/contract")),console.log("1111111111",Object({NODE_ENV:"production",API_ENV:"prod",PUBLIC_URL:"/governance"}))}},{key:"getAccountInfo",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.next=3,R({address:this.state.fromAddress});case 3:(e=t.sent).result?(console.log(e.result),this.setState({accountInfo:e.result}),this.generateTransaction()):u.a.hide();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e='{"pageParams":{"pay":{"currency":"NAS","value":"0","to":"'.concat(this.state.contractAddress,'","payload":{"function":"submitProposal","args":"[\\"').concat(this.state.toAddress,'\\",\\"').concat(this.state.amount,'\\",\\"').concat(this.state.note,'\\"]","type":"call"}}},"des":"confirmTransfer","category":"jump"}');return o.a.createElement("div",{className:L.a.container},o.a.createElement("h2",null,"\u53d1\u8d77\u63d0\u6848"),o.a.createElement("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.6)"}}),o.a.createElement("div",{className:L.a.inputContainer},o.a.createElement("span",{className:L.a.inputName},"To Address"),o.a.createElement(I.a,{placeholder:"To Address",className:L.a.proposalInput,onChange:function(e){return t.setToAddress(e)}})),o.a.createElement("div",{className:L.a.inputContainer},o.a.createElement("span",{className:L.a.inputName},"Amount"),o.a.createElement(I.a,{placeholder:"Amount",className:L.a.proposalInput,onChange:function(e){return t.setAmount(e)}})),o.a.createElement("div",{className:L.a.inputContainer},o.a.createElement("span",{className:L.a.inputName},"Proposal Note"),o.a.createElement(I.a,{placeholder:"Note (optional)",className:L.a.proposalInput,onChange:function(e){return t.setNote(e)}})),o.a.createElement("div",null,o.a.createElement("button",{className:L.a.genButton,onClick:this.startGenerate},"\u751f\u6210\u4ea4\u6613")),!!this.state.txString&&o.a.createElement("div",{className:L.a.txContainer},o.a.createElement("p",null,this.state.txString)),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Nano Pro \u626b\u7801")),o.a.createElement(q.a,{value:e,size:150})),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Wallet Extension")),o.a.createElement("button",{className:L.a.genButton,onClick:this.nebpayAction},"\u53d1\u8d77\u4ea4\u6613")))}}]),e}(o.a.Component),tt=(a(89),a(42)),et=a.n(tt),at=a(26),nt=a.n(at),ot=et.a.Item,rt=(ot.Brief,function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).setList=function(t){var e=[];for(var n in t){var r=Object.keys(t[n].vote),s="";for(var c in r){s=s+r[c].slice(-5)+": ","0"==t[n].vote[r[c]]?s+="NO  ":s+="YES  "}e.push(o.a.createElement(ot,null,o.a.createElement("div",{className:nt.a.cellContainer},o.a.createElement("div",{className:nt.a.indexContainer},o.a.createElement("span",{className:nt.a.textSpanBold},"Index ".concat(t[n].index))),o.a.createElement("div",{className:nt.a.middleContainer},o.a.createElement("div",null,o.a.createElement("span",{className:nt.a.textSpan},"Amount:")," ",o.a.createElement("span",{className:nt.a.textSpanBold},"".concat(t[n].amount))," ",o.a.createElement("span",{className:nt.a.textSpan},"To Address:")," ",o.a.createElement("span",{className:nt.a.textSpanBold}," ".concat(t[n].toAddress))),o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("span",{className:nt.a.textSpan},"Voted By:"),o.a.createElement("span",{className:nt.a.textSpan},"".concat(s))," "),o.a.createElement("div",null,o.a.createElement("span",{className:nt.a.textSpan},"Notes: ".concat(t[n].note)))),o.a.createElement("div",{className:nt.a.rightContainer},o.a.createElement("span",{style:"Declined"==t[n].status?{color:"red"}:{color:"black"}},t[n].status)))))}a.setState({list:e})},a.state={contractAddress:B()},a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.getHistory(),this.state.contractAddress||(u.a.info("\u8bf7\u5148\u8bbe\u7f6e\u5408\u7ea6\u5730\u5740"),this.props.history.push("/contract"))}},{key:"getHistory",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e,a,n,o,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.prev=1,e=[],a='{"from":"n1STxGuEZaneTtNiXoVLD8TdmSk48Erfvnd","to":"'.concat(this.state.contractAddress,'","value":"0","gasPrice":"20000000000","gasLimit":"2000000","contract":{"function":"getClosedProposal","args":"[]"}}'),console.log(a),t.next=7,M(JSON.parse(a));case 7:if("{}"!=(n=t.sent).result.result){t.next=11;break}return u.a.info("\u5217\u8868\u4e3a\u7a7a",1),t.abrupt("return");case 11:for(r in o=JSON.parse(n.result.result))e.push(o[r]);this.setState({history:e}),this.setList(e),console.log(e),u.a.hide(),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(1),u.a.hide(),console.log(t.t0);case 23:case"end":return t.stop()}}),t,this,[[1,19]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:nt.a.container},o.a.createElement("h2",null,"\u5386\u53f2\u63d0\u6848"),o.a.createElement("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.6)"}}),o.a.createElement(et.a,{style:{backgroundColor:"rgb(243,243,248)"}},this.state.list))}}]),e}(o.a.Component)),st=a(56),ct=a(16),lt=a.n(ct),it=et.a.Item,ut=(it.Brief,function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).voteAction=function(t,e){a.getAccountInfo(t,e),console.log("VOTE",t,e)},a.generateVoteTransaction=function(t,e){var n=[t,e],o=JSON.stringify(n);console.log("STR = "+o);var r={chainID:1,from:a.state.fromAddress,to:a.state.contractAddress,value:0,nonce:a.state.accountInfo.nonce,gasPrice:2e10,gasLimit:2e5,contract:{function:"voteForProposal",args:o}};console.log(r),a.setState({txString:JSON.stringify(r),index:t,decision:e}),u.a.hide()},a.nebpayAction=function(){var t="".concat(a.state.contractAddress),e='["'.concat(a.state.index,'","').concat(a.state.decision,'"]'),n={gasLimit:"200000",callback:Y.a.config.mainnetUrl};a.serialNumber=a.nebPay.call(t,"0","voteForProposal",e,n),console.log(a.serialNumber)},a.setList=function(t){var e=[];for(var n in t){var r=Object.keys(t[n].vote),s="";for(var c in r){s=s+r[c].slice(-5)+": ","0"==t[n].vote[r[c]]?s+="NO  ":s+="YES  "}e.push(o.a.createElement(it,null,o.a.createElement("div",{className:lt.a.cellContainer},o.a.createElement("div",{className:lt.a.indexContainer},o.a.createElement("span",{className:lt.a.textSpanBold},"Index ".concat(t[n].index))),o.a.createElement("div",{className:lt.a.middleContainer},o.a.createElement("div",null,o.a.createElement("span",{className:lt.a.textSpan},"Amount:")," ",o.a.createElement("span",{className:lt.a.textSpanBold},"".concat(t[n].amount))," ",o.a.createElement("span",{className:lt.a.textSpan},"To Address:")," ",o.a.createElement("span",{className:lt.a.textSpanBold}," ".concat(t[n].toAddress))),o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("span",{className:lt.a.textSpan},"Voted By:"),o.a.createElement("span",{className:lt.a.textSpan},"".concat(s))," "),o.a.createElement("div",null,o.a.createElement("span",{className:lt.a.textSpan},"Notes: ".concat(t[n].note))),o.a.createElement("div",null,o.a.createElement("button",{className:lt.a.agreeButton,onClick:a.voteAction.bind(Object(st.a)(a),t[n].index,1)},"\u540c\u610f"),o.a.createElement("button",{className:lt.a.declineButton,onClick:a.voteAction.bind(Object(st.a)(a),t[n].index,0)},"\u62d2\u7edd"))),o.a.createElement("div",{className:lt.a.rightContainer},o.a.createElement("span",{style:"Declined"==t[n].status?{color:"red"}:{color:"black"}},t[n].status)))))}a.setState({list:e})},a.state={contractAddress:B(),fromAddress:O()},a.nebPay=new Y.a,a.serialNumber="",a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.state.contractAddress&&this.state.fromAddress||(u.a.info("\u8bf7\u5148\u8bbe\u7f6e\u5408\u7ea6\u5730\u5740\u4ee5\u53caFrom"),this.props.history.push("/contract")),this.getOpenProposal()}},{key:"getOpenProposal",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e,a,n,o,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.prev=1,e=[],a='{"from":"'.concat(this.state.fromAddress,'","to":"').concat(this.state.contractAddress,'","value":"0","gasPrice":"20000000000","gasLimit":"2000000","contract":{"function":"getOpenProposal","args":"[]"}}'),console.log(a),t.next=7,M(JSON.parse(a));case 7:if(n=t.sent,console.log(n),"{}"!=n.result.result){t.next=12;break}return u.a.info("\u5217\u8868\u4e3a\u7a7a",1),t.abrupt("return");case 12:for(r in o=JSON.parse(n.result.result))e.push(o[r]);this.setState({openProposal:e}),this.setList(e),console.log(o),u.a.hide(),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(1),u.a.hide(),console.log(t.t0);case 24:case"end":return t.stop()}}),t,this,[[1,20]])})));return function(){return t.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var t=Object(K.a)(F.a.mark((function t(e,a){var n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.next=3,R({address:this.state.fromAddress});case 3:(n=t.sent).result?(console.log(n.result),this.setState({accountInfo:n.result}),this.generateVoteTransaction(e,a)):u.a.hide();case 5:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t='{"pageParams":{"pay":{"currency":"NAS","value":"0","to":"'.concat(this.state.contractAddress,'","payload":{"function":"voteForProposal","args":"[\\"').concat(this.state.index,'\\",\\"').concat(this.state.decision,'\\"]","type":"call"}}},"des":"confirmTransfer","category":"jump"}');return o.a.createElement("div",{className:lt.a.container},o.a.createElement("h2",null,"\u6295\u7968"),o.a.createElement("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.6)"}}),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(et.a,{style:{backgroundColor:"rgb(243,243,248)"}},this.state.list)),o.a.createElement("div",null,!!this.state.txString&&o.a.createElement("div",{className:lt.a.txContainer},o.a.createElement("p",null,this.state.txString))),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Nano Pro \u626b\u7801")),o.a.createElement(q.a,{value:t,size:150})),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Wallet Extension")),o.a.createElement("button",{className:lt.a.agreeButton,onClick:this.nebpayAction},"\u53d1\u8d77\u4ea4\u6613"))))}}]),e}(o.a.Component)),mt=a(27),dt=a.n(mt),pt=a(152),ht=a.n(pt),ft=function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).setContract=function(t){a.setState({contractAddress:t})},a.setFrom=function(t){a.setState({from:t})},a.confirmContract=function(){_(a.state.contractAddress),u.a.info("\u5408\u7ea6\u8bbe\u7f6e\u6210\u529f",1)},a.getContractCode=function(){window.open("https://github.com/AtlasProtocol/interactions/tree/develop/contracts/NAS/governance")},a.getHelp=function(){window.open("https://github.com/AtlasProtocol/AtlasProtocol.github.io")},a.state={contractAddress:B(),info:"",from:O()},a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.state.contractAddress&&this.state.from&&this.getContractInfo()}},{key:"getContractInfo",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e,a,n,o,r,s,c,l,i;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),m=this.state.from,A.a.set(S,m),console.log("stored from: ".concat(m)),t.prev=2,e='{"from":"'.concat(this.state.from,'","to":"').concat(this.state.contractAddress,'","value":"0","gasPrice":"20000000000","gasLimit":"2000000","contract":{"function":"getContractInfo","args":"[]"}}'),t.next=6,M(JSON.parse(e));case 6:for(r in a=t.sent,n=JSON.parse(a.result.result),o=[],n.chairGroup)s=n.chairGroup[r]+"\n",o.push(s);for(l in c=[],n.execGroup)i=n.execGroup[l]+"\n",c.push(i);this.setState({chairGroup:o,execGroup:c,tokenContract:n.tokenContract}),this.getBalance(),console.log(n),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),console.log(t.t0);case 20:case"end":return t.stop()}var m}),t,this,[[2,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"getBalance",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e,a,n,o,r,s;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("BALANCE FUNCTION"),t.prev=1,e='{"from":"n1STxGuEZaneTtNiXoVLD8TdmSk48Erfvnd","to":"'.concat(this.state.tokenContract,'","value":"0","gasPrice":"20000000000","gasLimit":"2000000","contract":{"function":"balanceOf","args":"[\\"').concat(this.state.contractAddress,'\\"]"}}'),console.log(e),t.next=6,M(JSON.parse(e));case 6:a=t.sent,n=JSON.parse(a.result.result),console.log(n),o=new ht.a(n),r=new ht.a(1e18),s=o.dividedBy(r),this.setState({balance:n,actualBalance:s.toString()}),u.a.hide(),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),u.a.hide(),console.log(t.t0);case 20:case"end":return t.stop()}}),t,this,[[1,16]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:dt.a.container},o.a.createElement("div",{className:dt.a.headerContainer},o.a.createElement("h2",null,"\u6cbb\u7406\u5408\u7ea6"),o.a.createElement("div",null,o.a.createElement("button",{className:dt.a.genButton,onClick:this.getContractCode.bind(this)},"\u67e5\u770b\u5408\u7ea6\u6a21\u677f\u4ee3\u7801"),o.a.createElement("button",{className:dt.a.genButton,onClick:this.getHelp.bind(this)},"\u4f7f\u7528\u5e2e\u52a9"))),o.a.createElement("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.6)"}}),o.a.createElement("div",{className:dt.a.inputContainer},o.a.createElement("span",{className:dt.a.inputName},"\u5408\u7ea6\u5730\u5740"),o.a.createElement(I.a,{placeholder:"Contract Address",className:dt.a.proposalInput,onChange:function(e){return t.setContract(e)},value:this.state.contractAddress})),o.a.createElement("div",null,o.a.createElement("button",{className:dt.a.genButton,onClick:this.confirmContract.bind(this)},"\u8bbe\u7f6e\u6cbb\u7406\u5408\u7ea6")),o.a.createElement("div",{className:dt.a.inputContainer},o.a.createElement("span",{className:dt.a.inputName},"From \u5730\u5740"),o.a.createElement(I.a,{placeholder:"From Address",className:dt.a.proposalInput,onChange:function(e){return t.setFrom(e)},value:this.state.from})),o.a.createElement("div",null,o.a.createElement("button",{className:dt.a.genButton,onClick:this.getContractInfo.bind(this)},"\u8bbe\u7f6eFrom")),!!this.state.tokenContract&&o.a.createElement("div",null,o.a.createElement("p",null,"\u5408\u7ea6\u72b6\u6001"),o.a.createElement("div",{className:dt.a.txContainer},o.a.createElement("p",null,"Contract: ",this.state.contractAddress),o.a.createElement("p",null,"executors: ",this.state.execGroup),o.a.createElement("p",null,"chairs: ",this.state.chairGroup),o.a.createElement("p",null,"TokenContract: ",this.state.tokenContract),o.a.createElement("p",null,"Balance: ",this.state.balance," (",this.state.actualBalance,")"))))}}]),e}(o.a.Component),gt=a(20),vt=a.n(gt),Et=et.a.Item,Nt=(Et.Brief,function(t){function e(t){var a;return Object(m.a)(this,e),(a=Object(p.a)(this,Object(h.a)(e).call(this,t))).proceedAction=function(t){a.getAccountInfo(t),console.log("START",t)},a.generateVoteTransaction=function(t){var e=[t],n=JSON.stringify(e);console.log("STR = "+n);var o={chainID:1,from:a.state.fromAddress,to:a.state.contractAddress,value:0,nonce:a.state.accountInfo.nonce,gasPrice:2e10,gasLimit:2e5,contract:{function:"startTransferForProposal",args:n}};console.log(o),a.setState({txString:JSON.stringify(o),index:t}),u.a.hide()},a.nebpayAction=function(){var t="".concat(a.state.contractAddress),e='["'.concat(a.state.index,'"]'),n={gasLimit:"200000",callback:Y.a.config.mainnetUrl};a.serialNumber=a.nebPay.call(t,"0","startTransferForProposal",e,n),console.log(a.serialNumber)},a.setList=function(t){var e=[];for(var n in t){var r=Object.keys(t[n].vote),s="";for(var c in r){s=s+r[c].slice(-5)+": ","0"==t[n].vote[r[c]]?s+="NO  ":s+="YES  "}e.push(o.a.createElement(Et,null,o.a.createElement("div",{className:vt.a.cellContainer},o.a.createElement("div",{className:vt.a.indexContainer},o.a.createElement("span",{className:vt.a.textSpanBold},"Index ".concat(t[n].index))),o.a.createElement("div",{className:vt.a.middleContainer},o.a.createElement("div",null,o.a.createElement("span",{className:vt.a.textSpan},"Amount:")," ",o.a.createElement("span",{className:vt.a.textSpanBold},"".concat(t[n].amount))," ",o.a.createElement("span",{className:vt.a.textSpan},"To Address:")," ",o.a.createElement("span",{className:vt.a.textSpanBold}," ".concat(t[n].toAddress))),o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("span",{className:vt.a.textSpan},"Voted By:"),o.a.createElement("span",{className:vt.a.textSpan},"".concat(s))," "),o.a.createElement("div",null,o.a.createElement("span",{className:vt.a.textSpan},"Notes: ".concat(t[n].note))),o.a.createElement("div",null,o.a.createElement("button",{className:vt.a.agreeButton,onClick:a.proceedAction.bind(Object(st.a)(a),t[n].index)},"\u6267\u884c\u8f6c\u8d26"))),o.a.createElement("div",{className:vt.a.rightContainer},o.a.createElement("span",{style:"Declined"==t[n].status?{color:"red"}:{color:"black"}},t[n].status)))))}a.setState({list:e})},a.state={contractAddress:B(),fromAddress:O()},a.nebPay=new Y.a,a.serialNumber="",a}return Object(f.a)(e,t),Object(d.a)(e,[{key:"componentDidMount",value:function(){this.state.contractAddress&&this.state.fromAddress||(u.a.info("\u8bf7\u5148\u8bbe\u7f6e\u5408\u7ea6\u5730\u5740\u4ee5\u53caFrom"),this.props.history.push("/contract")),this.getApprovedProposal()}},{key:"getApprovedProposal",value:function(){var t=Object(K.a)(F.a.mark((function t(){var e,a,n,o,r;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.prev=1,e=[],a='{"from":"'.concat(this.state.fromAddress,'","to":"').concat(this.state.contractAddress,'","value":"0","gasPrice":"20000000000","gasLimit":"2000000","contract":{"function":"getAwaitTransferProposal","args":"[]"}}'),console.log(a),t.next=7,M(JSON.parse(a));case 7:if(n=t.sent,console.log(n),"{}"!=n.result.result){t.next=12;break}return u.a.info("\u5217\u8868\u4e3a\u7a7a",1),t.abrupt("return");case 12:for(r in o=JSON.parse(n.result.result))e.push(o[r]);this.setState({openProposal:e}),this.setList(e),console.log(o),u.a.hide(),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(1),u.a.hide(),console.log(t.t0);case 24:case"end":return t.stop()}}),t,this,[[1,20]])})));return function(){return t.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var t=Object(K.a)(F.a.mark((function t(e){var a;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.a.loading(),t.next=3,R({address:this.state.fromAddress});case 3:(a=t.sent).result?(console.log(a.result),this.setState({accountInfo:a.result}),this.generateVoteTransaction(e)):u.a.hide();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t='{"pageParams":{"pay":{"currency":"NAS","value":"0","to":"'.concat(this.state.contractAddress,'","payload":{"function":"startTransferForProposal","args":"[\\"').concat(this.state.index,'\\"]","type":"call"}}},"des":"confirmTransfer","category":"jump"}');return o.a.createElement("div",{className:vt.a.container},o.a.createElement("h2",null,"\u6267\u884c\u8f6c\u8d26"),o.a.createElement("div",{style:{width:"100%",height:"1px",backgroundColor:"rgba(0,0,0,0.6)"}}),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(et.a,{style:{backgroundColor:"rgb(243,243,248)"}},this.state.list)),o.a.createElement("div",null,!!this.state.txString&&o.a.createElement("div",{className:vt.a.txContainer},o.a.createElement("p",null,this.state.txString)),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Nano Pro \u626b\u7801")),o.a.createElement(q.a,{value:t,size:150})),!!this.state.txString&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"\u4f7f\u7528Nas Wallet Extension")),o.a.createElement("button",{className:vt.a.agreeButton,onClick:this.nebpayAction},"\u53d1\u8d77\u4ea4\u6613")))))}}]),e}(o.a.Component));var xt=function(){return o.a.createElement("div",null,o.a.createElement(c.a,null,o.a.createElement(j,null),o.a.createElement(l.a,{exact:!0,path:"/",component:$}),o.a.createElement(l.a,{path:"/history",component:rt}),o.a.createElement(l.a,{path:"/vote",component:ut}),o.a.createElement(l.a,{path:"/transfer",component:Nt}),o.a.createElement(l.a,{path:"/contract",component:ft})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(xt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[246,1,2]]]);
//# sourceMappingURL=main.7bc3b139.chunk.js.map